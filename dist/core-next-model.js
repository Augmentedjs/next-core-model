!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("lodash.clone"),require("lodash.result"),require("lodash.isempty"),require("lodash.has"),require("lodash.defaults"),require("lodash.iteratee"),require("lodash.defer"),require("lodash.escape")):"function"==typeof define&&define.amd?define("core-next-model",["lodash.clone","lodash.result","lodash.isempty","lodash.has","lodash.defaults","lodash.iteratee","lodash.defer","lodash.escape"],t):"object"==typeof exports?exports["core-next-model"]=t(require("lodash.clone"),require("lodash.result"),require("lodash.isempty"),require("lodash.has"),require("lodash.defaults"),require("lodash.iteratee"),require("lodash.defer"),require("lodash.escape")):e["core-next-model"]=t(e["lodash.clone"],e["lodash.result"],e["lodash.isempty"],e["lodash.has"],e["lodash.defaults"],e["lodash.iteratee"],e["lodash.defer"],e["lodash.escape"])}(this,function(e,t,r,i,n,s,o,l){return function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=6)}([function(t,r){t.exports=e},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),n=r(3),s=r(4);const o=r(0),l=r(9),a=r(10),u=r(11),c=r(0),h=r(12),d=r(13),f=r(14),p=r(15),m=(e,t)=>{if(e){const r=t.error;t.error=(i=>{r&&r.call(t.context,e,i,t),e.trigger("error",e,i,t)})}};t.default=class extends i.AugmentedObject{constructor(e,t,...r){let i;super(t),this.id=0,this.idAttribute="id",this.cidPrefix="c",this.defaults={},this.validationError=null,this.urlRoot="",this._pending=!1,this._changing=!1,this._previousAttributes=null,this._attributes=e||{},t||(t={}),this.schema=null,this.validationMessages={valid:!0},t&&t.schema&&(this.schema=t.schema),this.preinitialize(r),this.cid=(0,n.uniqueId)(this.cidPrefix),t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(i=this.parse(i,t)||{}),this.defaults=l(this,"defaults"),i=h((0,n.extend)({},this.defaults,i),this.defaults),this.set(i,t),this.changed={},this.initialize(r)}preinitialize(...e){}initialize(...e){}get(e){return this._attributes[e]}set(e,t,r){if(null===e)return this;let i;if("object"==typeof e?(i=e,r=t):(i={})[e]=t,r||(r={}),!this._validate(i,r))return console.warn("Model did not validate"),!1;const n=r.unset,s=r.silent,l=[];let a=this._changing;this._changing=!0,a||(this._previousAttributes=o(this._attributes),this.changed={});let u=this._attributes,h=this.changed;const d=this._previousAttributes;let f;for(f in i)t=i[f],"string"==typeof u[f]&&"string"==typeof t&&u[f]!==t?l.push(f):c(u[f],t)||l.push(f),"string"==typeof d[f]&&"string"==typeof t&&d[f]!==t?h[f]=t:c(d[f],t)?delete h[f]:h[f]=t,n?delete u[f]:u[f]=t;if(this.idAttribute in i&&(this.id=this.get(this.idAttribute)),!s){l.length&&(this._pending=r);let e=0;for(e=0;e<l.length;e++)this.trigger("change:"+l[e],this,u[l[e]],r)}if(a)return this;if(!s)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this}escape(e){return p(this.get(attr))}has(e){return null!==this.get(attr)}matches(e){return!!d(e,this)(this._attributes)}unset(e,t){return this.set(e,void 0,(0,n.extend)({},t,{unset:!0}))}clear(e){let t={};for(let e in this._attributes)t[e]=void 0;return this.set(t,(0,n.extend)({},e,{unset:!0}))}toJSON(){return o(this._attributes)}fetch(e){e=(0,n.extend)({parse:!0},e);let t=this,r=e.success;return e.success=(i=>{let n=e.parse?t.parse(i,e):i;if(!t.set(n,e))return!1;r&&r.call(e.context,t,i,e),t.trigger("sync",t,i,e)}),m(this,e),this.sync("read",this,e)}save(e,t,r){let i;null==e||"object"==typeof e?(i=e,r=t):(i={})[e]=t;let s=(r=(0,n.extend)({validate:!0,parse:!0},r)).wait;if(i&&!s){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;let o=this,l=r.success,a=this._attributes;r.success=(e=>{o.attributes=a;let t=r.parse?o.parse(e,r):e;if(s&&(t=(0,n.extend)({},i,t)),t&&!o.set(t,r))return!1;l&&l.call(r.context,o,e,r),o.trigger("sync",o,e,r)}),m(this,r),i&&s&&(this._attributes=(0,n.extend)({},a,i));let u=this.isNew()?"create":r.patch?"patch":"update";"patch"!==u||r.attrs||(r.attrs=i);let c=this.sync(u,this,r);return this._attributes=a,c}destroy(e){e=e?o(e):{};let t=this,r=e.success,i=e.wait,n=()=>{t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=(s=>{i&&n(),r&&r.call(e.context,t,s,e),t.isNew()||t.trigger("sync",t,s,e)});let s=!1;return this.isNew()?f(e.success):(m(this,e),s=this.sync("delete",this,e)),i||n(),s}url(){let e=l(this,"urlRoot")||l(this.collection,"url")||urlError();if(this.isNew())return e;let t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)}keys(){return Object.keys(this._attributes)}values(){return Object.values(this._attributes)}parse(e,t){return e}clone(){return new this.constructor(this._attributes)}isNew(){return!this.has(this.idAttribute)}hasChanged(e){return null==e?!a(this.changed):u(this.changed,e)}changedAttributes(e){if(!e)return!!this.hasChanged()&&o(this.changed);let t,r=this._changing?this._previousAttributes:this._attributes,i={};for(let n in e){let s=e[n];c(r[n],s)||(i[n]=s,t=!0)}return!!t&&i}previous(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null}previousAttributes(){return o(this._previousAttributes)}supportsValidation(){return null!==this.schema}isValid(e){const t=this._validate({},(0,n.extend)({},e,{validate:!0}));return t?(this.validate(),this.validationMessages.valid):t}validate(){this._validationFramework||(this._validationFramework=new s.ValidationFramework);const e=this._validationFramework;return this.supportsValidation()&&e.supportsValidation()?this.validationMessages=e.validate(this.toJSON(),this.schema):this.validationMessages.valid=!0,this.validationMessages}getValidationMessages(){const e=[];if(this.validationMessages&&this.validationMessages.errors){const r=this.validationMessages.errors.length;var t=0;for(t=0;t<r;t++)e.push(this.validationMessages.errors[t].message+" from "+this.validationMessages.errors[t].dataPath)}return e}sync(e,t,r){}reset(e){this.clear(),e&&this.set(e)}isEmpty(){return!this._attributes||0===Object.keys(this._attributes).length}toString(){return JSON.stringify(this.toJSON())}fetch(e){this.sync("read",this,e)}save(e){this.sync("create",this,e)}update(e){this.sync("update",this,e)}destroy(e){this.sync("delete",this,e)}_validate(e,t){if(t&&(!t.validate||!this.validate))return!0;const r=this.validate();return!!r.valid||(this.trigger("invalid",this,r,(0,n.extend)(t,{validationError:r})),!1)}}},function(e,t,r){var i;e.exports=(i=r(7),function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=1)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=t.EVENT_SPLITTER=/\s+/,n=t.eventsApi=((e,t,r,s,o)=>{let l,a=0;if(r&&"object"==typeof r){void 0!==s&&"context"in o&&void 0===o.context&&(o.context=s);for(l=Object.keys(r);a<l.length;a++)t=n(e,t,l[a],r[l[a]],o)}else if(r&&i.test(r))for(l=r.split(i);a<l.length;a++)t=e(t,l[a],s,o);else t=e(t,r,s,o);return t}),s=(t.internalOn=((e,t,r,i,o)=>(e._events=n(s,e._events||{},t,r,{context:i,ctx:e,listening:o}),o&&((e._listeners||(e._listeners={}))[o.id]=o),e)),t.onApi=((e,t,r,i)=>{if(r){const n=e[t]||(e[t]=[]),s=i.context,o=i.ctx,l=i.listening;l&&l.count++,n.push({callback:r,context:s,ctx:s||o,listening:l})}return e})),o=(t.offApi=((e,t,r,i)=>{if(!e)return;let n,s=0;const o=i.context,l=i.listeners;if(!t&&!r&&!o){const e=Object.keys(l);for(;s<e.length;s++)delete l[(n=l[e[s]]).id],delete n.listeningTo[n.objId];return}let a=t?[t]:Object.keys(e);for(;s<a.length;s++){const i=e[t=a[s]];if(!i)break;const u=[];let c=0;for(c=0;c<i.length;c++){const e=i[c];r&&r!==e.callback&&r!==e.callback._callback||o&&o!==e.context?u.push(e):(n=e.listening)&&0==--n.count&&(delete l[n.id],delete n.listeningTo[n.objId])}u.length?e[t]=u:delete e[t]}return e}),t.triggerApi=((e,t,r,i)=>{if(e){const r=e[t];let n=e.all;r&&n&&(n=n.slice()),r&&o(r,i),n&&o(n,[t].concat(i))}return e}),t.triggerEvents=((e,t)=>{let r,i=-1;const n=e.length,s=t[0],o=t[1],l=t[2];switch(t.length){case 0:for(;++i<n;)(r=e[i]).callback.call(r.ctx);return;case 1:for(;++i<n;)(r=e[i]).callback.call(r.ctx,s);return;case 2:for(;++i<n;)(r=e[i]).callback.call(r.ctx,s,o);return;case 3:for(;++i<n;)(r=e[i]).callback.call(r.ctx,s,o,l);return;default:for(;++i<n;)(r=e[i]).callback.apply(r.ctx,t);return}}))},function(e,t,r){"use strict";var i=o(r(2)),n=o(r(5)),s=r(0);function o(e){return e&&e.__esModule?e:{default:e}}e.exports.AugmentedObject=i.default,e.exports.Configuration=n.default,e.exports.eventsApi=s.eventsApi,e.exports.eventsApi=s.internalOn,e.exports.eventsApi=s.offApi,e.exports.eventsApi=s.triggerApi},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),n=r(0);const s=r(4);t.default=class{constructor(e){e||(e={}),this._options||(this._options={}),Object.assign(this._options,e),e&&e.events?this._events=e.events:this._events={},this._listeningTo={},this._listenId={},this._listeners={}}initialize(...e){return this}get options(){return this._options}set options(e){this._options=e}get events(){return this._events}set events(e){this._events=e}trigger(e,...t){if(this._events){const r=Array.isArray(t)?t:Array.from(t);(0,n.eventsApi)(n.triggerApi,this._events,e,void 0,r)}return this}once(e,t,r){const i=(0,n.eventsApi)(this._onceMap,{},e,t,s(this.off,this));return"string"==typeof e&&null==r&&(t=void 0),this.on(i,t,r)}off(e,t,r){return this._events&&(this._events=(0,n.eventsApi)(n.offApi,this._events,e,t,{context:r,listeners:this._listeners})),this}stopListening(e,t,r){const i=this._listeningTo;if(i){const n=e?[e._listenId]:Object.keys(i);let s=0;for(s=0;s<n.length;s++){const e=i[n[s]];if(!e)break;e.obj.off(t,r,this)}}return this}on(e,t,r){return(0,n.internalOn)(this,e,t,r)}listenTo(e,t,r){if(e){const s=e._listenId||(e._listenId=(0,i.uniqueId)("l")),o=this._listeningTo||(this._listeningTo={});let l=o[s];if(!l){const t=this._listenId||(this._listenId=(0,i.uniqueId)("l"));l=o[s]={obj:e,objId:s,id:t,listeningTo:o,count:0}}(0,n.internalOn)(e,t,r,this,l)}return this}listenToOnce(e,t,r){const i=(0,n.eventsApi)(this._onceMap,{},t,r,s(this.stopListening,this,e));return this.listenTo(e,i)}_onceMap(e,t,r,n){if(r){const s=e[t]=(0,i.once)(()=>{n(t,s),r.apply(this,arguments)});s._callback=r}return e}}},function(e,t,r){"use strict";e.exports=function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=3)}([function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e=>{const t=typeof e;return"function"===t||"object"===t&&!!e})},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e=>"[object Function]"==Object.prototype.toString.call(e))},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=arguments;t.default=((e,t)=>{let r,n;if("function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT);return n=Number.parseInt(e),()=>(--n>0&&(r=t.apply(void 0,i)),n<=1&&(t=void 0),r)})},function(e,t,r){var i=S(r(4)),n=S(r(1)),s=S(r(5)),o=S(r(6)),l=S(r(7)),a=S(r(8)),u=S(r(0)),c=S(r(9)),h=S(r(10)),d=S(r(11)),f=S(r(12)),p=S(r(13)),m=S(r(14)),g=S(r(15)),y=S(r(16)),v=S(r(2)),_=S(r(17)),b=r(18),O=r(19),E=r(20),R=S(r(21)),M=S(r(22));function S(e){return e&&e.__esModule?e:{default:e}}e.exports.shuffle=O.shuffle,e.exports.prettyPrint=O.prettyPrint,e.exports.binarySearch=O.binarySearch,e.exports.TransformerType=O.TransformerType,e.exports.Transformer=O.Transformer,e.exports.wrap=O.wrap,e.exports.filterObject=O.filterObject,e.exports.findByMatchingProperties=O.findByMatchingProperties,e.exports.sortObjects=E.sortObjects,e.exports.mergeSort=E.mergeSort,e.exports.quickSort=E.quickSort,e.exports.insertionSort=E.insertionSort,e.exports.bubbleSort=E.bubbleSort,e.exports.formatDate=R.default,e.exports.formatBinary=M.default,e.exports.isString=i.default,e.exports.isFunction=n.default,e.exports.extend=s.default,e.exports.pad=o.default,e.exports.uniqueId=l.default,e.exports.has=a.default,e.exports.isObject=u.default,e.exports.allKeys=c.default,e.exports.create=h.default,e.exports.result=d.default,e.exports.arrayHas=f.default,e.exports.exec=p.default,e.exports.isDefined=m.default,e.exports.some=g.default,e.exports.splice=y.default,e.exports.before=v.default,e.exports.once=_.default,e.exports.fibonacci=b.fibonacci,e.exports.fibonacciSequence=b.fibonacciSequence},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e=>"string"==typeof e||!!e&&"object"==typeof e&&"[object String]"===Object.prototype.toString.call(e))},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=((...e)=>{let t=0;const r=e.length;for(t=1;t<r;t++){let r;for(r in e[t])e[t].hasOwnProperty(r)&&(e[0][r]=e[t][r])}return e[0]})},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=((e,t,r)=>void 0===t?e:r?`${e}${t}`:`${t}${e}`)},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});let i=0;t.default=(e=>`${e}${++i}`)},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=((e,t)=>null!==e&&hasOwnProperty.call(e,t))},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(r(0));t.default=(e=>(0,i.default)(e)?Object.getOwnPropertyNames(e):[])},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(r(0));t.default=((e,t)=>{const r=(e=>(0,i.default)(e)?Object.create(e):{})(e);return t&&Object.assign(r,t),r})},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(r(1));t.default=((e,t)=>{if(null===e)return;const r=e[t];return(0,i.default)(r)?r.call(e):r})},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=((e,t)=>-1!==e.indexOf(t))},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=((e,t,...r)=>{const i=e.split("."),n=i.pop(),s=i.length;let o=0;for(o=0;o<s;o++)t=t[i[o]];return t[n].apply(t,r)})},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e=>void 0!==e)},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=((e,t)=>!!Array.isArray(e)&&e.some(t))},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=((e,t,r)=>{r=Math.min(Math.max(r,0),e.length);let i=Array(e.length-r);const n=t.length;let s;for(s=0;s<i.length;s++)i[s]=e[s+r];for(s=0;s<n;s++)e[s+r]=t[s];for(s=0;s<i.length;s++)e[s+n+r]=i[s]})},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(r(2));t.default=(e=>(0,i.default)(2,e))},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});const i=t.fibonacci=(e=>{const t=(1+Math.sqrt(5))/2,r=Math.pow(t,e)/Math.sqrt(5);return Math.round(r)});t.fibonacciSequence=(e=>{const t=[];let r=0;for(r=0;r<e;r++)t.push(i(r));return t})},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=arguments;t.shuffle=(e=>{const t=e.slice(0);let r,i,n=0;for(n=e.length-1;n>0;n--)i=Math.floor(Math.random()*(n+1)),r=t[n],t[n]=t[i],t[i]=r;return t}),t.prettyPrint=((e,t,r)=>{let i="\t";return t&&(i=" ".repeat(r)),JSON.stringify(e,null,i)}),t.binarySearch=((e,t,r)=>{let i,n,s=0,o=e.length-1;for(;s<=o;)if((n=r(e[i=Math.floor((s+o)/2)],t))<0)s=i+1;else{if(!(n>0))return i;o=i-1}return null});const n=t.TransformerType={};n.STRING=Symbol("String"),n.INTEGER=Symbol("Integer"),n.NUMBER=Symbol("Number"),n.BOOLEAN=Symbol("Boolean"),n.ARRAY=Symbol("Array"),n.OBJECT=Symbol("Object"),n.NULL=Symbol("Null"),t.Transformer=class{constructor(){this.type=n}static transform(e,t){let r=null;switch(t){case n.STRING:r="object"==typeof e?JSON.stringify(e):String(e);break;case n.INTEGER:r=parseInt(e);break;case n.NUMBER:r=Number(e);break;case n.BOOLEAN:r=Boolean(e);break;case n.ARRAY:Array.isArray(e)?r=e:(r=[])[0]=e;break;case n.OBJECT:"object"!=typeof e?(r={})[e]=e:r=e}return r}static isType(e){return null===e?n.NULL:"string"==typeof e?n.STRING:"number"==typeof e?n.NUMBER:"boolean"==typeof e?n.BOOLEAN:Array.isArray(e)?n.ARRAY:"object"==typeof e?n.OBJECT:void 0}},t.wrap=((e,t)=>()=>t.apply(void 0,[e].concat(Array.prototype.slice.call(i)))),t.filterObject=((e,t)=>{const r={};if(e&&t){const i=t.length;let n=0;for(n=0;n<i;n++)r[t[n]]=e[t[n]]}return r}),t.findByMatchingProperties=((e,t)=>e.filter(e=>Object.keys(t).every(r=>e[r]===t[r])))},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.sortObjects=((e,t)=>e.sort((e,r)=>{const i=e[t],n=r[t];return i<n?-1:i>n?1:0}));const i=t.mergeSort=(e=>{if(1===e.length)return e;const t=Math.floor(e.length/2),r=e.slice(0,t),s=e.slice(t);return n(i(r),i(s))}),n=(e,t)=>{let r=[],i=0,n=0;for(;i<e.length&&n<t.length;)e[i]<t[n]?(r.push(e[i]),i++):(r.push(t[n]),n++);return r.concat(e.slice(i)).concat(t.slice(n))},s=t.quickSort=(e=>{if(0===e.length)return[];let t=1;const r=e.length,i=[],n=[],o=e[0];for(t=1;t<r;t++)e[t]<o?i.push(e[t]):n.push(e[t]);return s(i).concat(o,s(n))});t.insertionSort=(e=>{let t=[];if(e){const r=(t=e.slice()).length;let i,n,s;for(i=1;i<r;i++){for(s=t[i],n=i-1;n>=0&&t[n]>s;n--)t[n+1]=t[n];t[n+1]=s}}return t}),t.bubbleSort=(e=>{let t=[];if(e){let r,i,n;const s=(t=e.slice()).length-1;do{for(r=!1,i=0;i<s;i++)t[i]>t[i+1]&&(n=t[i],t[i]=t[i+1],t[i+1]=n,r=!0)}while(r)}return t})},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e=>{const t=e.getFullYear(),r=e.getMonth()+1,i=e.getDate(),n=e.getHours(),s=e.getMinutes();return e.getSeconds(),`${r}/${i}/${t} ${n%12||12}:${s<10?"0"+s:s}${n<12?"am":"pm"}`})},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=((e,t)=>(e=>{let t=0,r=e,i="";for(t=0;t<32;t++,i+=String(r>>>31),r<<=1);return i})(e).split("").reverse().join("").substring(0,t))}])},function(e,t){e.exports=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={LoggerLevel:"error",MessageBundle:"Messages",AsynchronousQueueTimeout:2e3,ApplicationInitProcessTimeout:1e3}}]))},function(e,t,r){e.exports=function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=3)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e=>{const t=typeof e;return"function"===t||"object"===t&&!!e})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e=>"[object Function]"==Object.prototype.toString.call(e))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=arguments;t.default=((e,t)=>{let r,n;if("function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT);return n=Number.parseInt(e),()=>(--n>0&&(r=t.apply(void 0,i)),n<=1&&(t=void 0),r)})},function(e,t,r){"use strict";var i=x(r(4)),n=x(r(1)),s=x(r(5)),o=x(r(6)),l=x(r(7)),a=x(r(8)),u=x(r(0)),c=x(r(9)),h=x(r(10)),d=x(r(11)),f=x(r(12)),p=x(r(13)),m=x(r(14)),g=x(r(15)),y=x(r(16)),v=x(r(2)),_=x(r(17)),b=r(18),O=r(19),E=r(20),R=x(r(21)),M=x(r(22)),S=x(r(23));function x(e){return e&&e.__esModule?e:{default:e}}e.exports.shuffle=O.shuffle,e.exports.prettyPrint=O.prettyPrint,e.exports.binarySearch=O.binarySearch,e.exports.TransformerType=O.TransformerType,e.exports.Transformer=O.Transformer,e.exports.wrap=O.wrap,e.exports.filterObject=O.filterObject,e.exports.findByMatchingProperties=O.findByMatchingProperties,e.exports.sortObjects=E.sortObjects,e.exports.mergeSort=E.mergeSort,e.exports.quickSort=E.quickSort,e.exports.insertionSort=E.insertionSort,e.exports.bubbleSort=E.bubbleSort,e.exports.formatDate=R.default,e.exports.formatBinary=M.default,e.exports.isString=i.default,e.exports.isFunction=n.default,e.exports.extend=s.default,e.exports.pad=o.default,e.exports.uniqueId=l.default,e.exports.has=a.default,e.exports.isObject=u.default,e.exports.allKeys=c.default,e.exports.create=h.default,e.exports.result=d.default,e.exports.arrayHas=f.default,e.exports.exec=p.default,e.exports.isDefined=m.default,e.exports.some=g.default,e.exports.splice=y.default,e.exports.before=v.default,e.exports.once=_.default,e.exports.filter=S.default,e.exports.fibonacci=b.fibonacci,e.exports.fibonacciSequence=b.fibonacciSequence},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e=>"string"==typeof e||!!e&&"object"==typeof e&&"[object String]"===Object.prototype.toString.call(e))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=((...e)=>{let t=0;const r=e.length;for(t=1;t<r;t++){let r;for(r in e[t])e[t].hasOwnProperty(r)&&(e[0][r]=e[t][r])}return e[0]})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=((e,t,r)=>void 0===t?e:r?`${e}${t}`:`${t}${e}`)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=0;t.default=(e=>`${e}${++i}`)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=((e,t)=>null!==e&&hasOwnProperty.call(e,t))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(r(0));t.default=(e=>(0,i.default)(e)?Object.getOwnPropertyNames(e):[])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(r(0));t.default=((e,t)=>{const r=(e=>(0,i.default)(e)?Object.create(e):{})(e);return t&&Object.assign(r,t),r})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(r(1));t.default=((e,t)=>{if(null===e)return;const r=e[t];return(0,i.default)(r)?r.call(e):r})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=((e,t)=>-1!==e.indexOf(t))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=((e,t,...r)=>{const i=e.split("."),n=i.pop(),s=i.length;let o=0;for(o=0;o<s;o++)t=t[i[o]];return t[n].apply(t,r)})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e=>void 0!==e)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=((e,t)=>!!Array.isArray(e)&&e.some(t))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=((e,t,r)=>{r=Math.min(Math.max(r,0),e.length);let i=Array(e.length-r);const n=t.length;let s;for(s=0;s<i.length;s++)i[s]=e[s+r];for(s=0;s<n;s++)e[s+r]=t[s];for(s=0;s<i.length;s++)e[s+n+r]=i[s]})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(r(2));t.default=(e=>(0,i.default)(2,e))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=t.fibonacci=(e=>{const t=(1+Math.sqrt(5))/2,r=Math.pow(t,e)/Math.sqrt(5);return Math.round(r)});t.fibonacciSequence=(e=>{const t=[];let r=0;for(r=0;r<e;r++)t.push(i(r));return t})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=arguments;t.shuffle=(e=>{const t=e.slice(0);let r,i,n=0;for(n=e.length-1;n>0;n--)i=Math.floor(Math.random()*(n+1)),r=t[n],t[n]=t[i],t[i]=r;return t}),t.prettyPrint=((e,t,r)=>{let i="\t";return t&&(i=" ".repeat(r)),JSON.stringify(e,null,i)}),t.binarySearch=((e,t,r)=>{let i,n,s=0,o=e.length-1;for(;s<=o;)if((n=r(e[i=Math.floor((s+o)/2)],t))<0)s=i+1;else{if(!(n>0))return i;o=i-1}return null});const n=t.TransformerType={};n.STRING=Symbol("String"),n.INTEGER=Symbol("Integer"),n.NUMBER=Symbol("Number"),n.BOOLEAN=Symbol("Boolean"),n.ARRAY=Symbol("Array"),n.OBJECT=Symbol("Object"),n.NULL=Symbol("Null"),t.Transformer=class{constructor(){this.type=n}static transform(e,t){let r=null;switch(t){case n.STRING:r="object"==typeof e?JSON.stringify(e):String(e);break;case n.INTEGER:r=parseInt(e);break;case n.NUMBER:r=Number(e);break;case n.BOOLEAN:r=Boolean(e);break;case n.ARRAY:Array.isArray(e)?r=e:(r=[])[0]=e;break;case n.OBJECT:"object"!=typeof e?(r={})[e]=e:r=e}return r}static isType(e){return null===e?n.NULL:"string"==typeof e?n.STRING:"number"==typeof e?n.NUMBER:"boolean"==typeof e?n.BOOLEAN:Array.isArray(e)?n.ARRAY:"object"==typeof e?n.OBJECT:void 0}},t.wrap=((e,t)=>()=>t.apply(void 0,[e].concat(Array.prototype.slice.call(i)))),t.filterObject=((e,t)=>{const r={};if(e&&t){const i=t.length;let n=0;for(n=0;n<i;n++)r[t[n]]=e[t[n]]}return r}),t.findByMatchingProperties=((e,t)=>e.filter(e=>Object.keys(t).every(r=>e[r]===t[r])))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortObjects=((e,t)=>e.sort((e,r)=>{const i=e[t],n=r[t];return i<n?-1:i>n?1:0}));const i=t.mergeSort=(e=>{if(1===e.length)return e;const t=Math.floor(e.length/2),r=e.slice(0,t),s=e.slice(t);return n(i(r),i(s))}),n=(e,t)=>{let r=[],i=0,n=0;for(;i<e.length&&n<t.length;)e[i]<t[n]?(r.push(e[i]),i++):(r.push(t[n]),n++);return r.concat(e.slice(i)).concat(t.slice(n))},s=t.quickSort=(e=>{if(0===e.length)return[];let t=1;const r=e.length,i=[],n=[],o=e[0];for(t=1;t<r;t++)e[t]<o?i.push(e[t]):n.push(e[t]);return s(i).concat(o,s(n))});t.insertionSort=(e=>{let t=[];if(e){const r=(t=e.slice()).length;let i,n,s;for(i=1;i<r;i++){for(s=t[i],n=i-1;n>=0&&t[n]>s;n--)t[n+1]=t[n];t[n+1]=s}}return t}),t.bubbleSort=(e=>{let t=[];if(e){let r,i,n;const s=(t=e.slice()).length-1;do{for(r=!1,i=0;i<s;i++)t[i]>t[i+1]&&(n=t[i],t[i]=t[i+1],t[i+1]=n,r=!0)}while(r)}return t})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=((e,t)=>{const r=e.getFullYear(),i=e.getMonth()+1,n=e.getDate(),s=e.getHours(),o=e.getMinutes();return e.getSeconds(),t?`${i}/${n}/${r}`:`${i}/${n}/${r} ${s%12||12}:${o<10?"0"+o:o}${s<12?"am":"pm"}`})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=((e,t)=>(e=>{let t=0,r=e,i="";for(t=0;t<32;t++,i+=String(r>>>31),r<<=1);return i})(e).split("").reverse().join("").substring(0,t))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=((e,t)=>e&&t?[].filter.call(e,e=>e!=t).join(""):null)}])},function(e,t,r){e.exports=function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=3)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3};let n,s={};for(n in i)s[i[n]]=n;t.ERROR_CODES=i,t.ERROR_MESSAGES_DEFAULT={INVALID_TYPE:"Invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",NUMBER_NOT_A_NUMBER:"Value {value} is not a valid number",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"},t.ValidationError=class{constructor(e,t,r,i,n,s){if(void 0===e)throw new Error("No code supplied for error: "+t);this.message=t,this.params=r,this.code=e,this.dataPath=i||"",this.schemaPath=n||"",this.subErrors=s||null;const o=new Error(this.message);if(this.stack=o.stack||o.stacktrace,!this.stack)try{throw o}catch(e){this.stack=e.stack||e.stacktrace}this.name="ValidationError"}prefixWith(e,t){if(null!==e&&(e=e.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+e+this.dataPath),null!==t&&(t=t.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+t+this.schemaPath),null!==this.subErrors){let r=0,i=this.subErrors.length;for(r=0;r<i;r++)this.subErrors[r].prefixWith(e,t)}return this}},t.ErrorCodeLookup=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i={$schema:"http://json-schema.org/draft-04/schema#",title:"model",description:"Generated Schema",type:"object",properties:{}};t.default=(e=>{let t,r,n,s,o=i,l=Object.keys(e),a=l.length;for(t=0;t<a;t++)for(n in r=l[t])if(r.hasOwnProperty(n)){s=o.properties[r]={};let t=typeof e[r];"object"===t?t=Array.isArray(e[r])?"array":"object":"number"===t&&(t=Number.isInteger(e[r])?"integer":"number"),s.type=t,s.description=String(r)}return o})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URI_TEMPLATE_GLOBAL_MODIFIERS={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},t.URI_TEMPLATE_SUFFICES={"*":!0};const i=t.parseURI=(e=>{const t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null}),n=t.removeDotSegments=(e=>{let t=[];return e.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){"/.."===e?t.pop():t.push(e)}),t.join("").replace(/^\//,"/"===e.charAt(0)?"/":"")}),s=t.resolveUrl=((e,t)=>(t=i(t||""),e=i(e||""),t&&e?(t.protocol||e.protocol)+(t.protocol||t.authority?t.authority:e.authority)+n(t.protocol||t.authority||"/"===t.pathname.charAt(0)?t.pathname:t.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+t.pathname:e.pathname)+(t.protocol||t.authority||t.pathname?t.search:t.search||e.search)+t.hash:null)),o=(t.getDocumentUri=(e=>e.split("#")[0]),t.isTrustedUrl=((e,t)=>{if(t.substring(0,e.length)===e){let r=t.substring(e.length);if(t.length>0&&"/"===t.charAt(e.length-1)||"#"===r.charAt(0)||"?"===r.charAt(0))return!0}return!1}),t.normSchema=((e,t)=>{if(e&&"object"==typeof e)if(void 0===t?t=e.id:"string"==typeof e.id&&(t=s(t,e.id),e.id=t),Array.isArray(e)){let r=0,i=e.length;for(r=0;r<i;r++)o(e[r],t)}else{"string"==typeof e.$ref&&(e.$ref=s(t,e.$ref));for(let r in e)"enum"!==r&&o(e[r],t)}}))},function(e,t,r){"use strict";var i=s(r(4)),n=s(r(1));function s(e){return e&&e.__esModule?e:{default:e}}e.exports.ValidationFramework=i.default,e.exports.SchemaGenerator=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(r(1)),n=o(r(5)),s=r(0);function o(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(){this._myValidator=(0,n.default)(),this._myValidator&&this._myValidator.addLanguage("en-us",s.ERROR_MESSAGES_DEFAULT)}supportsValidation(){return null!==this._myValidator}registerSchema(e,t){return this._myValidator.addSchema(e,t)}getSchema(e){return this._myValidator.getSchema(e)}getSchemas(){return this._myValidator.getSchemaMap()}clearSchemas(){this._myValidator.dropSchemas()}validate(e,t){return this._myValidator.validateMultiple(e,t)}getValidationMessages(){return this._myValidator.error}generateSchema(e){let t=e;return(0,i.default)(t)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=arguments,n=function(e){return e&&e.__esModule?e:{default:e}}(r(6)),s=r(0),o=r(2);let l={};const a=e=>{const t=new n.default;let r=e||"en";return{addFormat:(e,r)=>{t.addFormat(e,r)},language:e=>e?(l[e]||(e=e.split("-")[0]),!!l[e]&&(r=e,e)):r,addLanguage:(e,t)=>{let r;for(r in s.ERROR_CODES)t[r]&&!t[s.ERROR_CODES[r]]&&(t[s.ERROR_CODES[r]]=t[r]);let i=e.split("-")[0];if(l[i])for(r in l[e]=Object.create(l[i]),t)void 0===l[i][r]&&(l[i][r]=t[r]),l[e][r]=t[r];else l[e]=t,l[i]=t},freshApi:e=>{const t=a();return e&&t.language(e),t},validate:(e,i,s,o)=>{const a=new n.default(t,!1,l[r],s,o);"string"==typeof i&&(i={$ref:i}),a.addSchema("",i);let u=a.validateAll(e,i,null,null,"");return!u&&o&&(u=a.banUnknownProperties()),(void 0).error=u,(void 0).missing=a.missing,(void 0).valid=null===u,(void 0).valid},validateResult:()=>{let e={};return(void 0).validate.apply(e,i),e},validateMultiple:(e,i,s,o)=>{const a=new n.default(t,!0,l[r],s,o);"string"==typeof i&&(i={$ref:i}),a.addSchema("",i),a.validateAll(e,i,null,null,""),o&&a.banUnknownProperties();let u={};return u.errors=a.errors,u.missing=a.missing,u.valid=0===u.errors.length,u},addSchema:(e,r)=>t.addSchema(e,r),getSchema:(e,r)=>t.getSchema(e,r),getSchemaMap:()=>t.getSchemaMap.apply(t,i),getSchemaUris:()=>t.getSchemaUris.apply(t,i),getMissingUris:()=>t.getMissingUris.apply(t,i),dropSchemas:()=>{t.dropSchemas.apply(t,i)},defineKeyword:()=>{t.defineKeyword.apply(t,i)},defineError:(e,t,r)=>{if("string"!=typeof e||!/^[A-Z]+(_[A-Z]+)*$/.test(e))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if("number"!=typeof t||t%1!=0||t<1e4)throw new Error("Code number must be an integer > 10000");if(void 0!==s.ERROR_CODES[e])throw new Error("Error already defined: "+e+" as "+s.ERROR_CODES[e]);if(void 0!==s.ErrorCodeLookup[t])throw new Error("Error code already used: "+s.ErrorCodeLookup[t]+" as "+t);s.ERROR_CODES[e]=t,s.ErrorCodeLookup[t]=e,s.ERROR_MESSAGES_DEFAULT[e]=s.ERROR_MESSAGES_DEFAULT[t]=r;for(let r in l){let i=l[r];i[e]&&(i[t]=i[t]||i[e])}},reset:()=>{t.reset(),(void 0).error=null,(void 0).missing=[],(void 0).valid=!0},missing:[],error:null,valid:!0,normSchema:o.normSchema,resolveUrl:o.resolveUrl,getDocumentUri:o.getDocumentUri,errorCodes:s.ERROR_CODES}};t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),n=r(2);let s=Math.pow(2,-51),o=1-s;class l{constructor(e,t,r,i,n){if(this.missing=[],this.missingMap={},this.formatValidators=e?Object.create(e.formatValidators):{},this.schemas=e?Object.create(e.schemas):{},this.collectMultiple=t,this.errors=[],this.handleError=t?this.collectError:this.returnError,i&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),n&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorMessages=r,this.definedKeywords={},e)for(let t in e.definedKeywords)this.definedKeywords[t]=e.definedKeywords[t].slice(0)}notReallyPercentEncode(e){return encodeURI(e).replace(/%25[0-9][0-9]/g,e=>"%"+e.substring(3))}uriTemplateSubstitution(e){let t="";URI_TEMPLATE_GLOBAL_MODIFIERS[e.charAt(0)]&&(t=e.charAt(0),e=e.substring(1));let r="",i="",n=!0,s=!1,o=!1;"+"===t?n=!1:"."===t?(i=".",r="."):"/"===t?(i="/",r="/"):"#"===t?(i="#",n=!1):";"===t?(i=";",r=";",s=!0,o=!0):"?"===t?(i="?",r="&",s=!0):"&"===t&&(i="&",r="&",s=!0);let l=[],a=e.split(","),u=[],c={},h=0,d=a.length;for(h=0;h<d;h++){let e=a[h],t=null;if(-1!==e.indexOf(":")){let r=e.split(":");e=r[0],t=parseInt(r[1],10)}let r={};for(;URI_TEMPLATE_SUFFICES[e.charAt(e.length-1)];)r[e.charAt(e.length-1)]=!0,e=e.substring(0,e.length-1);let i={truncate:t,name:e,suffices:r};u.push(i),c[e]=i,l.push(e)}const f=e=>{let t="",l=0,a=0,c=u.length;for(a=0;a<c;a++){let h=u[a];if(!e&&!isFunction(e))throw new Error("Problem qith value function.");let d=e(h.name);if(null==d||Array.isArray(d)&&0===d.length||"object"==typeof d&&0===Object.keys(d).length)l++;else if(t+=a===l?i:r||",",Array.isArray(d)){s&&(t+=h.name+"=");let e=0;for(c=d.length,e=0;e<c;e++)e>0&&(t+=h.suffices["*"]&&r||",",h.suffices["*"]&&s&&(t+=h.name+"=")),t+=n?encodeURIComponent(d[e]).replace(/!/g,"%21"):this.notReallyPercentEncode(d[e])}else if("object"==typeof d){s&&!h.suffices["*"]&&(t+=h.name+"=");let e=!0;for(let i in d)e||(t+=h.suffices["*"]&&r||","),e=!1,t+=n?encodeURIComponent(i).replace(/!/g,"%21"):this.notReallyPercentEncode(i),t+=h.suffices["*"]?"=":",",t+=n?encodeURIComponent(d[i]).replace(/!/g,"%21"):this.notReallyPercentEncode(d[i])}else s&&(t+=h.name,o&&""===d||(t+="=")),null!==h.truncate&&(d=d.substring(0,h.truncate)),t+=n?encodeURIComponent(d).replace(/!/g,"%21"):this.notReallyPercentEncode(d)}return t};return f.varNames=l,{prefix:i,substitution:f}}recursiveCompare(e,t){if(e===t)return!0;if("object"==typeof e&&"object"==typeof t){if(Array.isArray(e)!==Array.isArray(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;let r=0,i=e.length;for(r=0;r<i;r++)if(!this.recursiveCompare(e[r],t[r]))return!1}else{let r;for(r in e)if(void 0===t[r]&&void 0!==e[r])return!1;for(r in t)if(void 0===e[r]&&void 0!==t[r])return!1;for(r in e)if(!this.recursiveCompare(e[r],t[r]))return!1}return!0}return!1}defineKeyword(e,t){this.definedKeywords[e]=this.definedKeywords[e]||[],this.definedKeywords[e].push(t)}createError(e,t,r,n,s){let o=this.errorMessages[e]||i.ERROR_MESSAGES_DEFAULT[e];if("string"!=typeof o)return new i.ValidationError(e,"Unknown error code "+e+": "+JSON.stringify(t),t,r,n,s);let l=o.replace(/\{([^{}]*)\}/g,function(e,r){let i=t[r];return"string"==typeof i||"number"==typeof i?i:e});return new i.ValidationError(e,l,t,r,n,s)}returnError(e){return e}collectError(e){return e&&this.errors.push(e),null}prefixErrors(e,t,r){let i=0,n=this.errors.length;for(i=e;i<n;i++)this.errors[i]=this.errors[i].prefixWith(t,r);return this}banUnknownProperties(){for(let e in this.unknownPropertyPaths){let t=this.createError(i.ERROR_CODES.UNKNOWN_PROPERTY,{path:e},e,""),r=this.handleError(t);if(r)return r}return null}addFormat(e,t){if("object"==typeof e){for(let t in e)this.addFormat(t,e[t]);return this}this.formatValidators[e]=t}resolveRefs(e,t){if(void 0!==e.$ref){if((t=t||{})[e.$ref])return this.createError(i.ERROR_CODES.CIRCULAR_REFERENCE,{urls:Object.keys(t).join(", ")},"","");t[e.$ref]=!0,e=this.getSchema(e.$ref,t)}return e}getSchema(e,t){let r;if(void 0!==this.schemas[e])return r=this.schemas[e],this.resolveRefs(r,t);let i=e,n="";if(-1!==e.indexOf("#")&&(n=e.substring(e.indexOf("#")+1),i=e.substring(0,e.indexOf("#"))),"object"==typeof this.schemas[i]){r=this.schemas[i];let e=decodeURIComponent(n);if(""===e)return this.resolveRefs(r,t);if("/"!==e.charAt(0))return;let s=e.split("/").slice(1),o=0,l=s.length;for(o=0;o<l;o++){let e=s[o].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===r[e]){r=void 0;break}r=r[e]}if(void 0!==r)return this.resolveRefs(r,t)}void 0===this.missing[i]&&(this.missing.push(i),this.missing[i]=i,this.missingMap[i]=i)}searchSchemas(e,t){if(Array.isArray(e)){let r=0,i=e.length;for(r=0;r<i;r++)this.searchSchemas(e[r],t)}else if(e&&"object"==typeof e){"string"==typeof e.id&&isTrustedUrl(t,e.id)&&void 0===this.schemas[e.id]&&(this.schemas[e.id]=e);for(let r in e)if("enum"!==r)if("object"==typeof e[r])this.searchSchemas(e[r],t);else if("$ref"===r){let t=(0,n.getDocumentUri)(e[r]);t&&void 0===this.schemas[t]&&void 0===this.missingMap[t]&&(this.missingMap[t]=t)}}}addSchema(e,t){if("string"!=typeof e||void 0===t){if("object"!=typeof e||"string"!=typeof e.id)return;e=(t=e).id}e===(0,n.getDocumentUri)(e)+"#"&&(e=(0,n.getDocumentUri)(e)),this.schemas[e]=t,delete this.missingMap[e],(0,n.normSchema)(t,e),this.searchSchemas(t,e)}getSchemaMap(){let e={};for(let t in this.schemas)e[t]=this.schemas[t];return e}getSchemaUris(e){let t=[];for(let r in this.schemas)e&&!e.test(r)||t.push(r);return t}getMissingUris(e){let t=[];for(let r in this.missingMap)e&&!e.test(r)||t.push(r);return t}dropSchemas(){this.schemas={},this.reset()}reset(){this.missing=[],this.missingMap={},this.errors=[]}validateAll(e,t,r,n,s){let o;if(!(t=this.resolveRefs(t)))return null;if(t instanceof i.ValidationError)return this.errors.push(t),t;let l,a=this.errors.length,u=null,c=null;if(this.checkRecursive&&e&&"object"==typeof e){if(o=!this.scanned.length,e[this.validatedSchemasKey]){let r=e[this.validatedSchemasKey].indexOf(t);if(-1!==r)return this.errors=this.errors.concat(e[this.validationErrorsKey][r]),null}if(Object.isFrozen(e)&&-1!==(l=this.scannedFrozen.indexOf(e))){let e=this.scannedFrozenSchemas[l].indexOf(t);if(-1!==e)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[l][e]),null}if(this.scanned.push(e),Object.isFrozen(e))-1===l&&(l=this.scannedFrozen.length,this.scannedFrozen.push(e),this.scannedFrozenSchemas.push([])),u=this.scannedFrozenSchemas[l].length,this.scannedFrozenSchemas[l][u]=t,this.scannedFrozenValidationErrors[l][u]=[];else{if(!e[this.validatedSchemasKey])try{Object.defineProperty(e,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(e,this.validationErrorsKey,{value:[],configurable:!0})}catch(t){e[this.validatedSchemasKey]=[],e[this.validationErrorsKey]=[]}c=e[this.validatedSchemasKey].length,e[this.validatedSchemasKey][c]=t,e[this.validationErrorsKey][c]=[]}}let h=this.errors.length,d=this.validateBasic(e,t,s)||this.validateNumeric(e,t,s)||this.validateString(e,t,s)||this.validateArray(e,t,s)||this.validateObject(e,t,s)||this.validateCombinations(e,t,s)||this.validateHypermedia(e,t,s)||this.validateFormat(e,t,s)||this.validateDefinedKeywords(e,t,s)||null;if(o){for(;this.scanned.length;)delete this.scanned.pop()[this.validatedSchemasKey];this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(d||h!==this.errors.length)for(;r&&r.length||n&&n.length;){let e=r&&r.length?""+r.pop():null,t=n&&n.length?""+n.pop():null;d&&(d=d.prefixWith(e,t)),this.prefixErrors(h,e,t)}return null!==u?this.scannedFrozenValidationErrors[l][u]=this.errors.slice(a):null!==c&&(e[this.validationErrorsKey][c]=this.errors.slice(a)),this.handleError(d)}validateFormat(e,t){if("string"!=typeof t.format||!this.formatValidators[t.format])return null;let r=this.formatValidators[t.format].call(null,e,t);return"string"==typeof r||"number"==typeof r?this.createError(i.ERROR_CODES.FORMAT_CUSTOM,{message:r}).prefixWith(null,"format"):r&&"object"==typeof r?this.createError(i.ERROR_CODES.FORMAT_CUSTOM,{message:r.message||"?"},r.dataPath||null,r.schemaPath||"/format"):null}validateDefinedKeywords(e,t,r){for(let n in this.definedKeywords){if(void 0===t[n])continue;let s=this.definedKeywords[n],o=0,l=s.length;for(o=0;o<l;o++){let l=(0,s[o])(e,t[n],t,r);if("string"==typeof l||"number"==typeof l)return this.createError(i.ERROR_CODES.KEYWORD_CUSTOM,{key:n,message:l}).prefixWith(null,"format");if(l&&"object"==typeof l){let e=l.code;if("string"==typeof e){if(!i.ERROR_CODES[e])throw new Error("Undefined error code (use defineError): "+e);e=i.ERROR_CODES[e]}else"number"!=typeof e&&(e=i.ERROR_CODES.KEYWORD_CUSTOM);let t="object"==typeof l.message?l.message:{key:n,message:l.message||"?"},r=l.schemaPath||"/"+n.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(e,t,l.dataPath||null,r)}}}return null}validateBasic(e,t,r){let i=this.validateType(e,t,r);return i?i.prefixWith(null,"type"):null}validateType(e,t){if(void 0===t.type)return null;let r=typeof e;null===e?r="null":Array.isArray(e)&&(r="array");let n=t.type;"object"!=typeof n&&(n=[n]);let s=0,o=n.length;for(s=0;s<o;s++){let t=n[s];if(t===r||"integer"===t&&"number"===r&&e%1==0)return null}return this.createError(i.ERROR_CODES.INVALID_TYPE,{type:r,expected:n.join("/")})}validateEnum(e,t){if(void 0===t.enum)return null;let r=0,n=t.enum.length;for(r=0;r<n;r++){let i=t.enum[r];if(this.recursiveCompare(e,i))return null}return this.createError(i.ERROR_CODES.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(e):e})}validateNumeric(e,t,r){return this.validateMultipleOf(e,t,r)||this.validateMinMax(e,t,r)||this.validateNaN(e,t,r)||null}validateMultipleOf(e,t){let r=t.multipleOf||t.divisibleBy;if(void 0===r)return null;if("number"==typeof e){let t=e/r%1;if(t>=s&&t<o)return this.createError(i.ERROR_CODES.NUMBER_MULTIPLE_OF,{value:e,multipleOf:r})}return null}validateMinMax(e,t){if("number"!=typeof e)return null;if(void 0!==t.minimum){if(e<t.minimum)return this.createError(i.ERROR_CODES.NUMBER_MINIMUM,{value:e,minimum:t.minimum}).prefixWith(null,"minimum");if(t.exclusiveMinimum&&e===t.minimum)return this.createError(i.ERROR_CODES.NUMBER_MINIMUM_EXCLUSIVE,{value:e,minimum:t.minimum}).prefixWith(null,"exclusiveMinimum")}if(void 0!==t.maximum){if(e>t.maximum)return this.createError(i.ERROR_CODES.NUMBER_MAXIMUM,{value:e,maximum:t.maximum}).prefixWith(null,"maximum");if(t.exclusiveMaximum&&e===t.maximum)return this.createError(i.ERROR_CODES.NUMBER_MAXIMUM_EXCLUSIVE,{value:e,maximum:t.maximum}).prefixWith(null,"exclusiveMaximum")}return null}validateNaN(e){return"number"!=typeof e?null:!0===isNaN(e)||e===1/0||e===-1/0?this.createError(i.ERROR_CODES.NUMBER_NOT_A_NUMBER,{value:e}).prefixWith(null,"type"):null}validateString(e,t,r){return this.validateStringLength(e,t,r)||this.validateStringPattern(e,t,r)||null}validateStringLength(e,t){return"string"!=typeof e?null:void 0!==t.minLength&&e.length<t.minLength?this.createError(i.ERROR_CODES.STRING_LENGTH_SHORT,{length:e.length,minimum:t.minLength}).prefixWith(null,"minLength"):void 0!==t.maxLength&&e.length>t.maxLength?this.createError(i.ERROR_CODES.STRING_LENGTH_LONG,{length:e.length,maximum:t.maxLength}).prefixWith(null,"maxLength"):null}validateStringPattern(e,t){return"string"!=typeof e||void 0===t.pattern?null:new RegExp(t.pattern).test(e)?null:this.createError(i.ERROR_CODES.STRING_PATTERN,{pattern:t.pattern}).prefixWith(null,"pattern")}validateArray(e,t,r){return Array.isArray(e)&&(this.validateArrayLength(e,t,r)||this.validateArrayUniqueItems(e,t,r)||this.validateArrayItems(e,t,r))||null}validateArrayLength(e,t){let r;return void 0!==t.minItems&&e.length<t.minItems&&(r=this.createError(i.ERROR_CODES.ARRAY_LENGTH_SHORT,{length:e.length,minimum:t.minItems}).prefixWith(null,"minItems"),this.handleError(r))?r:void 0!==t.maxItems&&e.length>t.maxItems&&(r=this.createError(i.ERROR_CODES.ARRAY_LENGTH_LONG,{length:e.length,maximum:t.maxItems}).prefixWith(null,"maxItems"),this.handleError(r))?r:null}validateArrayUniqueItems(e,t){if(t.uniqueItems){let t=0,r=e.length;for(t=0;t<r;t++){let n=0;for(n=t+1;n<r;n++)if(recursiveCompare(e[t],e[n])){let e=this.createError(i.ERROR_CODES.ARRAY_UNIQUE,{match1:t,match2:n}).prefixWith(null,"uniqueItems");if(this.handleError(e))return e}}}return null}validateArrayItems(e,t,r){if(void 0===t.items)return null;let n,s;if(Array.isArray(t.items)){let o=e.length;for(s=0;s<o;s++)if(s<t.items.length){if(n=this.validateAll(e[s],t.items[s],[s],["items",s],r+"/"+s))return n}else if(void 0!==t.additionalItems)if("boolean"==typeof t.additionalItems){if(!t.additionalItems&&(n=this.createError(i.ERROR_CODES.ARRAY_ADDITIONAL_ITEMS,{}).prefixWith(""+s,"additionalItems"),this.handleError(n)))return n}else if(n=this.validateAll(e[s],t.additionalItems,[s],["additionalItems"],r+"/"+s))return n}else{let i=e.length;for(s=0;s<i;s++)if(n=this.validateAll(e[s],t.items,[s],["items"],r+"/"+s))return n}return null}validateObject(e,t,r){return"object"!=typeof e||null===e||Array.isArray(e)?null:this.validateObjectMinMaxProperties(e,t,r)||this.validateObjectRequiredProperties(e,t,r)||this.validateObjectProperties(e,t,r)||this.validateObjectDependencies(e,t,r)||null}validateObjectMinMaxProperties(e,t){let r,n=Object.keys(e);return void 0!==t.minProperties&&n.length<t.minProperties&&(r=this.createError(i.ERROR_CODES.OBJECT_PROPERTIES_MINIMUM,{propertyCount:n.length,minimum:t.minProperties}).prefixWith(null,"minProperties"),this.handleError(r))?r:void 0!==t.maxProperties&&n.length>t.maxProperties&&(r=this.createError(i.ERROR_CODES.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:n.length,maximum:t.maxProperties}).prefixWith(null,"maxProperties"),this.handleError(r))?r:null}validateObjectRequiredProperties(e,t){if(void 0!==t.required){let r=0,n=t.required.length;for(r=0;r<n;r++){let n=t.required[r];if(void 0===e[n]){let e=this.createError(i.ERROR_CODES.OBJECT_REQUIRED,{key:n}).prefixWith(null,""+r).prefixWith(null,"required");if(this.handleError(e))return e}}}return null}validateObjectProperties(e,t,r){let n;for(let s in e){let o=r+"/"+s.replace(/~/g,"~0").replace(/\//g,"~1"),l=!1;if(void 0!==t.properties&&void 0!==t.properties[s]&&(l=!0,n=this.validateAll(e[s],t.properties[s],[s],["properties",s],o)))return n;if(void 0!==t.patternProperties)for(let r in t.patternProperties)if(new RegExp(r).test(s)&&(l=!0,n=this.validateAll(e[s],t.patternProperties[r],[s],["patternProperties",r],o)))return n;if(l)this.trackUnknownProperties&&(this.knownPropertyPaths[o]=!0,delete this.unknownPropertyPaths[o]);else if(void 0!==t.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[o]=!0,delete this.unknownPropertyPaths[o]),"boolean"==typeof t.additionalProperties){if(!t.additionalProperties&&(n=this.createError(i.ERROR_CODES.OBJECT_ADDITIONAL_PROPERTIES,{}).prefixWith(s,"additionalProperties"),this.handleError(n)))return n}else if(n=this.validateAll(e[s],t.additionalProperties,[s],["additionalProperties"],o))return n}else this.trackUnknownProperties&&!this.knownPropertyPaths[o]&&(this.unknownPropertyPaths[o]=!0)}return null}validateObjectDependencies(e,t,r){let n;if(void 0!==t.dependencies)for(let s in t.dependencies)if(void 0!==e[s]){let o=t.dependencies[s];if("string"==typeof o){if(void 0===e[o]&&(n=this.createError(i.ERROR_CODES.OBJECT_DEPENDENCY_KEY,{key:s,missing:o}).prefixWith(null,s).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(Array.isArray(o)){let t=0,r=o.lenth;for(t=0;t<r;t++){let r=o[t];if(void 0===e[r]&&(n=this.createError(i.ERROR_CODES.OBJECT_DEPENDENCY_KEY,{key:s,missing:r}).prefixWith(null,""+t).prefixWith(null,s).prefixWith(null,"dependencies"),this.handleError(n)))return n}}else if(n=this.validateAll(e,o,[],["dependencies",s],r))return n}return null}validateCombinations(e,t,r){return this.validateAllOf(e,t,r)||this.validateAnyOf(e,t,r)||this.validateOneOf(e,t,r)||this.validateNot(e,t,r)||null}validateAllOf(e,t,r){if(void 0===t.allOf)return null;let i,n=0,s=t.allOf.length;for(n=0;n<s;n++){let s=t.allOf[n];if(i=this.validateAll(e,s,[],["allOf",n],r))return i}return null}validateAnyOf(e,t,r){if(void 0===t.anyOf)return null;let n,s,o=[],l=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,s=this.knownPropertyPaths);let a=!0,u=0,c=t.anyOf.length;for(u=0;u<c;u++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});let i=t.anyOf[u],c=this.errors.length,h=this.validateAll(e,i,[],["anyOf",u],r);if(null===h&&c===this.errors.length){if(this.errors=this.errors.slice(0,l),this.trackUnknownProperties){for(let e in this.knownPropertyPaths)s[e]=!0,delete n[e];for(let e in this.unknownPropertyPaths)s[e]||(n[e]=!0);a=!1;continue}return null}h&&o.push(h.prefixWith(null,""+u).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=s),a?(o=o.concat(this.errors.slice(l)),this.errors=this.errors.slice(0,l),this.createError(i.ERROR_CODES.ANY_OF_MISSING,{},"","/anyOf",o)):void 0}validateOneOf(e,t,r){if(void 0===t.oneOf)return null;let n,s,o=null,l=[],a=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,s=this.knownPropertyPaths);let u=0,c=t.oneOf.length;for(u=0;u<c;u++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});let c=t.oneOf[u],h=this.errors.length,d=this.validateAll(e,c,[],["oneOf",u],r);if(null===d&&h===this.errors.length){if(null!==o)return this.errors=this.errors.slice(0,a),this.createError(i.ERROR_CODES.ONE_OF_MULTIPLE,{index1:o,index2:u},"","/oneOf");if(o=u,this.trackUnknownProperties){for(let e in this.knownPropertyPaths)s[e]=!0,delete n[e];for(let e in this.unknownPropertyPaths)s[e]||(n[e]=!0)}}else d&&l.push(d)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=s),null===o?(l=l.concat(this.errors.slice(a)),this.errors=this.errors.slice(0,a),this.createError(i.ERROR_CODES.ONE_OF_MISSING,{},"","/oneOf",l)):(this.errors=this.errors.slice(0,a),null)}validateNot(e,t,r){if(void 0===t.not)return null;let n,s,o=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,s=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});let l=this.validateAll(e,t.not,null,null,r),a=this.errors.slice(o);return this.errors=this.errors.slice(0,o),this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=s),null===l&&0===a.length?this.createError(i.ERROR_CODES.NOT_PASSED,{},"","/not"):null}validateHypermedia(e,t,r){if(!t.links)return null;let i,n=0,s=t.links.length;for(n=0;n<s;n++){let s=t.links[n];if("describedby"===s.rel){let t=new UriTemplate(s.href),o=!0,l=0,a=t.varNames.length;for(l=0;l<a;l++)if(!(t.varNames[l]in e)){o=!1;break}if(o){let s={$ref:t.fillFromObject(e)};if(i=this.validateAll(e,s,[],["links",n],r))return i}}}}}t.default=l=l}])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=1,n=2;t.default=class{constructor(e,t){this._collection=e,this._kind=t,this._index=0}next(){if(this._collection){if(this._index<this._collection.length){const e=this._collection.at(this._index);let t;if(this._index++,this._kind===i)t=e;else{const r=this._collection.modelId(e.attributes);t=this._kind===n?r:[r,e]}return{value:t,done:!1}}this._collection=void 0}return{value:void 0,done:!0}}}},function(e,t,r){"use strict";var i=o(r(1)),n=o(r(16)),s=o(r(5));function o(e){return e&&e.__esModule?e:{default:e}}e.exports.AbstractModel=i.default,e.exports.AbstractCollection=n.default,e.exports.CollectionIterator=s.default},function(e,t,r){(function(t){var r="Expected a function",i="__lodash_placeholder__",n=1,s=2,o=4,l=8,a=16,u=32,c=64,h=128,d=512,f=1/0,p=9007199254740991,m=1.7976931348623157e308,g=NaN,y=[["ary",h],["bind",n],["bindKey",s],["curry",l],["curryRight",a],["flip",d],["partial",u],["partialRight",c],["rearg",256]],v="[object Function]",_="[object GeneratorFunction]",b="[object Symbol]",O=/^\s+|\s+$/g,E=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,R=/\{\n\/\* \[wrapped with (.+)\] \*/,M=/,? & /,S=/^[-+]0x[0-9a-f]+$/i,x=/^0b[01]+$/i,P=/^\[object .+?Constructor\]$/,A=/^0o[0-7]+$/i,j=/^(?:0|[1-9]\d*)$/,I=parseInt,N="object"==typeof t&&t&&t.Object===Object&&t,T="object"==typeof self&&self&&self.Object===Object&&self,w=N||T||Function("return this")();function U(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function k(e,t){return!!(e?e.length:0)&&function(e,t,r){if(t!=t)return function(e,t,r,i){var n=e.length,s=r+(i?1:-1);for(;i?s--:++s<n;)if(t(e[s],s,e))return s;return-1}(e,C,r);var i=r-1,n=e.length;for(;++i<n;)if(e[i]===t)return i;return-1}(e,t,0)>-1}function C(e){return e!=e}function D(e,t){for(var r=-1,n=e.length,s=0,o=[];++r<n;){var l=e[r];l!==t&&l!==i||(e[r]=i,o[s++]=r)}return o}var L,F,B,$=Function.prototype,V=Object.prototype,G=w["__core-js_shared__"],q=(L=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||""))?"Symbol(src)_1."+L:"",K=$.toString,Y=V.hasOwnProperty,J=V.toString,W=RegExp("^"+K.call(Y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),H=Object.create,z=Math.max,X=Math.min,Q=(F=se(Object,"defineProperty"),(B=se.name)&&B.length>2?F:void 0);function Z(e){return!(!de(e)||(t=e,q&&q in t))&&(function(e){var t=de(e)?J.call(e):"";return t==v||t==_}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?W:P).test(function(e){if(null!=e){try{return K.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function ee(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r,i=de(r=e.prototype)?H(r):{},n=e.apply(i,t);return de(n)?n:i}}function te(e,t,r,i,o,u,c,f,p,m){var g=t&h,y=t&n,v=t&s,_=t&(l|a),b=t&d,O=v?void 0:ee(e);return function n(){for(var s=arguments.length,l=Array(s),a=s;a--;)l[a]=arguments[a];if(_)var h=ne(n),d=function(e,t){for(var r=e.length,i=0;r--;)e[r]===t&&i++;return i}(l,h);if(i&&(l=function(e,t,r,i){for(var n=-1,s=e.length,o=r.length,l=-1,a=t.length,u=z(s-o,0),c=Array(a+u),h=!i;++l<a;)c[l]=t[l];for(;++n<o;)(h||n<s)&&(c[r[n]]=e[n]);for(;u--;)c[l++]=e[n++];return c}(l,i,o,_)),u&&(l=function(e,t,r,i){for(var n=-1,s=e.length,o=-1,l=r.length,a=-1,u=t.length,c=z(s-l,0),h=Array(c+u),d=!i;++n<c;)h[n]=e[n];for(var f=n;++a<u;)h[f+a]=t[a];for(;++o<l;)(d||n<s)&&(h[f+r[o]]=e[n++]);return h}(l,u,c,_)),s-=d,_&&s<m){var E=D(l,h);return re(e,t,te,n.placeholder,r,l,E,f,p,m-s)}var R=y?r:this,M=v?R[e]:e;return s=l.length,f?l=function(e,t){for(var r=e.length,i=X(t.length,r),n=function(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}(e);i--;){var s=t[i];e[i]=ae(s,r)?n[s]:void 0}return e}(l,f):b&&s>1&&l.reverse(),g&&p<s&&(l.length=p),this&&this!==w&&this instanceof n&&(M=O||ee(M)),M.apply(R,l)}}function re(e,t,r,i,a,h,d,f,p,m){var g=t&l;t|=g?u:c,(t&=~(g?c:u))&o||(t&=~(n|s));var y=r(e,t,a,g?h:void 0,g?d:void 0,g?void 0:h,g?void 0:d,f,p,m);return y.placeholder=i,ue(y,e,t)}function ie(e,t,i,o,h,d,f,p){var m=t&s;if(!m&&"function"!=typeof e)throw new TypeError(r);var g=o?o.length:0;if(g||(t&=~(u|c),o=h=void 0),f=void 0===f?f:z(pe(f),0),p=void 0===p?p:pe(p),g-=h?h.length:0,t&c){var y=o,v=h;o=h=void 0}var _=[e,t,i,o,h,y,v,d,f,p];if(e=_[0],t=_[1],i=_[2],o=_[3],h=_[4],!(p=_[9]=null==_[9]?m?0:e.length:z(_[9]-g,0))&&t&(l|a)&&(t&=~(l|a)),t&&t!=n)b=t==l||t==a?function(e,t,r){var i=ee(e);return function n(){for(var s=arguments.length,o=Array(s),l=s,a=ne(n);l--;)o[l]=arguments[l];var u=s<3&&o[0]!==a&&o[s-1]!==a?[]:D(o,a);return(s-=u.length)<r?re(e,t,te,n.placeholder,void 0,o,u,void 0,void 0,r-s):U(this&&this!==w&&this instanceof n?i:e,this,o)}}(e,t,p):t!=u&&t!=(n|u)||h.length?te.apply(void 0,_):function(e,t,r,i){var s=t&n,o=ee(e);return function t(){for(var n=-1,l=arguments.length,a=-1,u=i.length,c=Array(u+l),h=this&&this!==w&&this instanceof t?o:e;++a<u;)c[a]=i[a];for(;l--;)c[a++]=arguments[++n];return U(h,s?r:this,c)}}(e,t,i,o);else var b=function(e,t,r){var i=t&n,s=ee(e);return function t(){return(this&&this!==w&&this instanceof t?s:e).apply(i?r:this,arguments)}}(e,t,i);return ue(b,e,t)}function ne(e){return e.placeholder}function se(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Z(r)?r:void 0}function oe(e){var t=e.match(R);return t?t[1].split(M):[]}function le(e,t){var r=t.length,i=r-1;return t[i]=(r>1?"& ":"")+t[i],t=t.join(r>2?", ":" "),e.replace(E,"{\n/* [wrapped with "+t+"] */\n")}function ae(e,t){return!!(t=null==t?p:t)&&("number"==typeof e||j.test(e))&&e>-1&&e%1==0&&e<t}var ue=Q?function(e,t,r){var i,n=t+"";return Q(e,"toString",{configurable:!0,enumerable:!1,value:(i=le(n,ce(oe(n),r)),function(){return i})})}:function(e){return e};function ce(e,t){return function(e,t){for(var r=-1,i=e?e.length:0;++r<i&&!1!==t(e[r],r,e););}(y,function(r){var i="_."+r[0];t&r[1]&&!k(e,i)&&e.push(i)}),e.sort()}var he=function(e,t){return t=z(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,n=z(r.length-t,0),s=Array(n);++i<n;)s[i]=r[t+i];i=-1;for(var o=Array(t+1);++i<t;)o[i]=r[i];return o[t]=s,U(e,this,o)}}(function(e,t,r){var i=n;if(r.length){var s=D(r,ne(he));i|=u}return ie(e,i,t,r,s)});function de(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function fe(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&J.call(e)==b}(e))return g;if(de(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=de(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(O,"");var r=x.test(e);return r||A.test(e)?I(e.slice(2),r?2:8):S.test(e)?g:+e}(e))===f||e===-f?(e<0?-1:1)*m:e==e?e:0:0===e?e:0}function pe(e){var t=fe(e),r=t%1;return t==t?r?t-r:t:0}he.placeholder={},e.exports=he}).call(this,r(8))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t){e.exports=i},function(e,t){e.exports=n},function(e,t){e.exports=s},function(e,t){e.exports=o},function(e,t){e.exports=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),n=r(3),s=a(r(1)),o=r(4),l=a(r(5));function a(e){return e&&e.__esModule?e:{default:e}}const u=(e,t)=>e.filter(e=>Object.keys(t).every(r=>e._attributes[r]===t[r])),c=r(0),h={add:!0,remove:!0,merge:!0},d={add:!0,remove:!1};t.default=class extends i.AugmentedObject{constructor(e,t){super(t),this.length=0,this.models=[],this._byId={},this.schema=null,this.validationMessages={valid:!0},t||(t={}),this.preinitialize(e,t),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize(e,t),e&&this.add(e,(0,n.extend)({silent:!0},t)),this.model||(this.model=new s.default)}preinitialize(e,t){}initialize(e,t){}toJSON(){let e=0;const t=[],r=this.models.length;for(e=0;e<r;e++)t[e]=this.models[e].toJSON();return t}add(e,t){return this.set(e,(0,n.extend)({merge:!1},t,d))}remove(e,t){t=(0,n.extend)({},t);const r=Array.isArray(e);e=r?[e]:e.slice();let i=this._removeModels(e,t);return!t.silent&&i.length&&(t.changes={added:[],merged:[],removed:i},this.trigger("update",this,t)),r?i[0]:i}set(e,t){if(null===e)return;(t=(0,n.extend)({},h,t)).parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);let r=!Array.isArray(e);e=r?[e]:e.slice();let i=t.at;null!=i&&(i=+i),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);let s,o,l=[],a=[],u=[],c=[],d={},f=t.add,p=t.merge,m=t.remove,g=!1,y=this.comparator&&null==i&&!1!==t.sort,v=(0,n.isString)(this.comparator)?this.comparator:null;const _=e.length;for(o=0;o<_;o++){s=e[o];let r=this.get(s);if(r){if(p&&s!==r){let e=this._isModel(s)?s._attributes:s;t.parse&&(e=r.parse(e,t)),r.set(e,t),u.push(r),y&&!g&&(g=r.hasChanged(v))}d[r.cid]||(d[r.cid]=!0,l.push(r)),e[o]=r}else f&&(s=e[o]=this._prepareModel(s,t))&&(a.push(s),this._addReference(s,t),d[s.cid]=!0,l.push(s))}if(m){for(o=0;o<this.length;o++)d[(s=this.models[o]).cid]||c.push(s);c.length&&this._removeModels(c,t)}let b=!1,O=!y&&f&&m;if(l.length&&O?(b=this.length!==l.length||(0,n.some)(this.models,(e,t)=>e!==l[t]),this.models.length=0,(0,n.splice)(this.models,l,0),this.length=this.models.length):a.length&&(y&&(g=!0),(0,n.splice)(this.models,a,null==i?this.length:i),this.length=this.models.length),g&&this.sort({silent:!0}),!t.silent){for(o=0;o<a.length;o++)null!=i&&(t.index=i+o),(s=a[o]).trigger("add",s,this,t);(g||b)&&this.trigger("sort",this,t),(a.length||c.length||u.length)&&(t.changes={added:a,removed:c,merged:u},this.trigger("update",this,t))}return r?e[0]:e}reset(e,t){t=t?c(t):{};for(let e=0;e<this.models.length;e++)this._removeReference(this.models[e],t);return t.previousModels=this.models,this._reset(),e=this.add(e,(0,n.extend)({silent:!0},t)),t.silent||this.trigger("reset",this,t),e}push(e,t){return this.add(e,(0,n.extend)({at:this.length},t))}pop(e){const t=this.at(this.length-1);return this.remove(t,e)}unshift(e,t){return this.add(e,(0,n.extend)({at:0},t))}shift(e){const t=this.at(0);return this.remove(t,e)}slice(...e){return this.models.slice(e)}get(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(this._isModel(e)?e._attributes:e)]||e.cid&&this._byId[e.cid]}has(e){return null!==this.get(e)}at(e){return e<0&&(e+=this.length),this.models[e]}find(e){const t=u(this.models,e);return t&&t.length>0?t[0]:null}filter(e){return u(this.models,e)}where(e,t){return t?this.find(e):this.filter(e)}findWhere(e){return this.where(e,!0)}sort(e){let t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});let r=t.length;return(0,n.isFunction)(t)&&(t=t.bind(this)),1===r||(0,n.isString)(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this}pluck(e){let t=0;const r=[],i=this.models.length;for(t=0;t<i;t++)r[t]=this.models[t].toJSON()[e];return r}fetch(e){}create(e,t){let r=(t=t?c(t):{}).wait;if(!(e=this._prepareModel(e,t)))return!1;r||this.add(e,t);let i=this,n=t.success;return t.success=((e,t,s)=>{r&&i.add(e,s),n&&n.call(s.context,e,t,s)}),e.save(null,t),e}parse(e,t){return e}clone(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})}modelId(e){return e&&this.model&&this.model.idAttribute?e[this.model.idAttribute||"id"]:"id"}values(){return new l.default(this,ITERATOR_VALUES)}keys(){return new l.default(this,ITERATOR_KEYS)}entries(){return new l.default(this,ITERATOR_KEYSVALUES)}supportsValidation(){return!(!this.schema||null===this.schema||this.schema==={})}isValid(){return!this.validationMessages||this.validationMessages.valid}getValidationMessages(){return this.validationMessages&&this.validationMessages.messages?this.validationMessages.messages:[]}validate(){if(this.supportsValidation()){let e=[];this.validationMessages.messages=e,this.validationMessages.valid=!0;const t=this.toJSON(),r=t&&Array.isArray(t)?t.length:0;let i=0;this._validationFramework||(this._validationFramework=new o.ValidationFramework);const n=this._validationFramework;for(i=0;i<r;i++)e[i]=n.validate(t[i],this.schema),e[i].valid||(this.validationMessages.valid=!1)}else this.validationMessages.valid=!0;return this.validationMessages}sync(e,t,r){}save(e){this.sync("create",this,e)}update(e){this.sync("update",this,e)}remove(e){this.sync("delete",this,e)}sortByKey(e){if(e){const t=this.toJSON();if(t){const r=(0,n.sortObjects)(t,e);this.reset(r)}}}isEmpty(){return 0===this.length}size(){return this.length}toString(){let e={};try{e=JSON.stringify(this.toJSON())}catch(e){console.error(e)}return e}_reset(){this.length=0,this.models=[],this._byId={}}_prepareModel(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;(t=t?c(t):{}).collection=this;const r=new s.default(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r}_removeModels(e,t){let r=[];for(let i=0;i<e.length;i++){let n=this.get(e[i]);if(!n)continue;let s=this.at(n);this.models.splice(s,1),this.length--,delete this._byId[n.cid];let o=this.modelId(n._attributes);null!=o&&delete this._byId[o],t.silent||(t.index=s,n.trigger("remove",n,this,t)),r.push(n),this._removeReference(n,t)}return r}_isModel(e){return e instanceof s.default}_addReference(e,t){this._byId[e.cid]=e;let r=this.modelId(e._attributes);null!=r&&(this._byId[r]=e),e.on("all",this._onModelEvent,this)}_removeReference(e,t){delete this._byId[e.cid];let r=this.modelId(e._attributes);null!=r&&delete this._byId[r],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)}_onModelEvent(e,t,r,i){if(t){if(("add"===e||"remove"===e)&&r!==this)return;if("destroy"===e&&this.remove(t,i),"change"===e){let e=this.modelId(t.previousAttributes()),r=this.modelId(t._attributes);e!==r&&(null!=e&&delete this._byId[e],null!=r&&(this._byId[r]=t))}}this.trigger.apply(this,arguments)}}}])});
//# sourceMappingURL=core-next-model.js.map